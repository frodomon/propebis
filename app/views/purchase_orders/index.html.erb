<% provide(:title, "Propebis | Órdenes de Compra") %>
<%= render 'shared/notifications' %>

<div class="row wrapper border-bottom white-bg page-heading breadcrumbs-margin">
  <div class="col-lg-10">
    <h2>Órdenes de Compra</h2>
    <ol class="breadcrumb">
      <li>
        <a href="<%= url_for :controller => 'static_pages', :action => 'home' %>">Home</a>
      </li>
      <li class="active">
        <strong>Órdenes de compra</strong>
      </li>
    </ol>
  </div>
  <div class="col-lg-2">
  </div>
</div>
<div class="wrapper wrapper-content animated fadeInRight">
  <div class="row">
    <div class="col-lg-12">
      <div class="ibox float-e-margins">
        <div class="ibox-title">
          <h5>Órdenes de Compra</h5>
        </div>
        <div class="ibox-content">
          <%= button_to 'Nueva Orden de Compra', { action: 'new'}, method: :get, class: 'btn btn-w-m btn-primary' %>
          <input type="text" class="form-control input-sm m-b-xs" id="filter" placeholder="Buscar">
          <table class="footable table table-stripped toggle-arrow-tiny" data-page-size="25" data-filter=#filter>
            <thead>
              <tr>
                <th>Eḿpresa</th>
                <th>Proveedor</th>
                <th>Nro. Orden</th>
                <th>Fecha</th>
                <th>Fecha de la Orden</th>
                <th>Fecha de Entrega</th>
                <th>Dirección de Facturación</th>
                <th>Dirección de Entrega</th>
                <th>Monto Final</th>
                <th colspan="2"></th>
              </tr>
            </thead>
            <tbody>
              <% @purchase_orders.each do |purchase_order| %>
                <tr>
                  <td><%= Business.find(purchase_order.business_id).name %></td>
                  <td><%= Supplier.find(purchase_order.supplier_id).name %></td>
                  <td><%= purchase_order.order_number %></td>
                  <td><%= purchase_order.date %></td>
                  <td><%= purchase_order.order_date %></td>
                  <td><%= purchase_order.delivery_date %></td>
                  <td><%= purchase_order.billing_address %></td>
                  <td><%= purchase_order.delivery_address %></td>
                  <td><%= purchase_order.ammount %></td>
                  <td align="center"><%= button_to 'Editar', { action: 'edit', id: purchase_order.id}, method: :get, class: 'btn btn-w-m btn-warning btn-xs' %></td>
                  <td align="center"><%= button_to 'Eliminar', { action: 'destroy', id: purchase_order.id}, method: :delete,  data: { confirm: '¿Está seguro?' }, class: 'btn btn-w-m btn-danger btn-xs' %></td>
                </tr>
              <% end %>
            </tbody>
            <tfoot>
              <tr>
                <td colspan='5'>
                  <ul class="pagination pull-right"></ul>
                </td>
              </tr>
            </tfoot>
          </table>
          
        </div>
        <!--Fin Ibox Content-->
      </div>
      <!--Fin Ibox-->
    </div>
  </div>
</div>

<% content_for :javascript do %>
  <script type="text/javascript">
    $(function() {
      $('.footable').footable();
    });
  </script>
<% end %>